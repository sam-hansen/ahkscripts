const n=require("fs"),t=require("path"),e=function(){this.text="",this.name="",this.getText=function(){return this.text},this.setText=function(n){this.text=n},this.getName=function(){return this.name},this.setName=function(n){this.name=n}};var r="";const o={};var s="",u=0,c=null;function f(){var n="";for(i=0;i<u;i++)n+="  ";return s+n}function a(i){c&&(!c||c instanceof e)?c.setText(c.getText()+f()+i+"\n"):n.appendFileSync(t.dirname(require.main.filename)+"/"+r,f()+i+"\n")}const l=require("./commands.json");for(let n in l)o[n]=function(...t){a(l[n].replace(new RegExp("%","g"),t.join(", ")))};const m=require("./conditions.json");for(let n in m)o[n]=function(...t){return m[n].replace(new RegExp("%","g"),t.join(", "))};function h(n){return function(t){var e=n+"."+t;n.length<1&&(e=t);return new class{constructor(n){this.get=h(n),this.term=n}run(...n){a(e+"("+n.join(", ")+")")}runInline(...n){return this.term+"("+n.join(", ")+")"}contents(){return"%"+this.term+"%"}toString(){return this.term}}(e)}}o.on=function(n,t){a(n+"::"),u++,t(),u--,a("Return")},o.If=function(n,t){if(u>0?(a("if ("+n+") {"),u++):a("#If ("+n+")"),t(),u>0)return u--,a("}"),{Else:function(n){a("else {"),u++,n(),u--,a("}")}};a("#If")},o.set=function(n,t){a(n+" := "+t)},o.get=h(""),module.exports={init:function(i,f){c=null,f&&f instanceof e&&(c=f),u=0,s="",r=i+".ahk",Object.assign(global,o),f?(c.setText(""),c.setName(r)):n.writeFileSync(t.dirname(require.main.filename)+"/"+r,"")},Script:e};